---
title: "Ruby"
description: "ActivitySmith Ruby SDK is a wrapper around the ActivitySmith API to help you easily send push notifications and Live Activities to your iOS devices."
icon: "ruby"
og:title: "Ruby SDK | ActivitySmith"
og:description: "ActivitySmith Ruby SDK is a wrapper around the ActivitySmith API to help you easily send push notifications and Live Activities to your iOS devices."
---

import InstallationRuby from "/snippets/installation/ruby.mdx";

## Installation

To install the ActivitySmith Ruby SDK, you can use RubyGems:

<InstallationRuby />

## Usage

1. Get an API key from [ActivitySmith](https://activitysmith.com)
2. Set the API key as an environment variable named `ACTIVITYSMITH_API_KEY` or pass it directly to `ActivitySmith::Client`.

Here's an example of how to use the SDK with error handling:

```ruby Ruby
require "activitysmith"

api_key = ENV["ACTIVITYSMITH_API_KEY"] || "YOUR-API-KEY"
activitysmith = ActivitySmith::Client.new(api_key: api_key)
```

### Send a Push Notification

Use `activitysmith.notifications.send` with a push payload. `title` is required; `message` and `subtitle` are optional.

<img
  className="image"
  src="https://cdn.activitysmith.com/features/new-subscription-push-notification.png"
  alt="Push Notification"
/>

```ruby Ruby
response = activitysmith.notifications.send(
  {
    title: "New subscription ðŸ’¸",
    message: "Customer upgraded to Pro plan"
  }
)

puts response.success
puts response.devices_notified
```

### Start a Live Activity

Start a Live Activity with `activitysmith.live_activities.start`.

<img className="image" src="https://cdn.activitysmith.com/features/start-live-activity.png" alt="Start Live Activity" />

```ruby Ruby
start = activitysmith.live_activities.start(
  {
    content_state: {
      title: "Nightly database backup",
      subtitle: "create snapshot",
      number_of_steps: 3,
      current_step: 1,
      type: "segmented_progress",
      color: "yellow"
    }
  }
)

activity_id = start.activity_id
```

### Update a Live Activity

Update a Live Activity with `activitysmith.live_activities.update` using the `activity_id`.

<img
  className="image"
  src="https://cdn.activitysmith.com/features/update-live-activity.png"
  alt="Update Live Activity"
/>

```ruby Ruby
update = activitysmith.live_activities.update(
  {
    activity_id: activity_id,
    content_state: {
      title: "Nightly database backup",
      subtitle: "upload archive",
      current_step: 2
    }
  }
)

puts update.devices_notified
```

### End a Live Activity

End a Live Activity with `activitysmith.live_activities.end`. You can optionally set `auto_dismiss_minutes` in the `content_state`.

<img className="image" src="https://cdn.activitysmith.com/features/end-live-activity.png" alt="End Live Activity" />

```ruby Ruby
finish = activitysmith.live_activities.end(
  {
    activity_id: activity_id,
    content_state: {
      title: "Nightly database backup",
      subtitle: "verify restore",
      current_step: 3,
      auto_dismiss_minutes: 2
    }
  }
)

puts finish.success
```

## Channels

You can target specific channels when sending a push or starting a Live Activity.

```ruby Ruby
activitysmith.notifications.send(
  {
    title: "New subscription ðŸ’¸",
    message: "Customer upgraded to Pro plan",
    channels: ["ios-builds", "engineering"]
  }
)

activitysmith.live_activities.start(
  {
    channels: ["ios-builds"],
    content_state: {
      title: "Nightly database backup",
      number_of_steps: 3,
      current_step: 1,
      type: "segmented_progress"
    }
  }
)
```

## Error Handling

Handle API errors with `begin/rescue` around SDK calls:

```ruby Ruby
begin
  activitysmith.notifications.send(
    { title: "Hello" }
  )
rescue OpenapiClient::ApiError => err
  puts "Request failed: #{err.code} #{err.message}"
end
```

## Additional Resources

<CardGroup cols={2}>
  <Card title="RubyGems Package" icon="gem" href="https://rubygems.org/gems/activitysmith">
    Download and install the ActivitySmith Ruby SDK on RubyGems
  </Card>
  <Card title="Source Code" icon="github" href="https://github.com/ActivitySmithHQ/activitysmith-ruby">
    View the complete source code for the ActivitySmith Ruby SDK
  </Card>
</CardGroup>
